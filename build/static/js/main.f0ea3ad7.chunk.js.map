{"version":3,"sources":["services/persons.js","index.js"],"names":["baseUrl","axios","get","then","res","data","person","post","id","put","delete","err","response","error","request","message","Notification","msg","undefined","className","Error","e","Filter","persons","useState","searchedPersons","setSearchedPersons","onChange","event","target","value","toLowerCase","filter","name","includes","map","key","number","PersonForm","onPersonsChange","onMsgChange","onErrorChange","newName","setNewName","newNumber","setNewNumber","onSubmit","preventDefault","newPerson","conflictedPerson","find","window","confirm","personsService","setTimeout","catch","concat","type","Person","onPersonDelete","onClick","Persons","App","setMsg","setPersons","setError","handleMsgChange","handleErrorChange","useEffect","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f0ea3ad7.chunk.js","sourcesContent":["import axios from 'axios'\n\n// const baseUrl = 'http://localhost:3001/api/persons'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const req = axios.get(baseUrl)\n    return req.then(res => res.data)\n}\n\nconst create = (person) => {\n    const req = axios.post(baseUrl, person)\n    return req.then(res => res.data)\n}\n\nconst update = (id, person) => {\n    const req = axios.put(`${baseUrl}/${id}`, person)\n    return req.then(res => res.data)\n}\n\nconst deletePerson = (id) => {\n    const req = axios.delete(`${baseUrl}/${id}`)\n    return req.then(res => res.data)\n}\n\nconst errorHandler = (err) => {\n    if (err.response) {\n        return err.response.data.error\n    } else if (err.request) {\n        return err.request\n    } else {\n        return err.message\n    }\n}\n\nexport default {\n    getAll, create, update, deletePerson, errorHandler\n}\n","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport personsService from './services/persons'\nimport './index.css'\n\nconst Notification = ({msg}) => {\n\tif (msg === undefined) return null\n\telse {\n\t\treturn (\n\t\t\t<div className=\"Notification\">\n\t\t\t\t{msg}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst Error = ({e}) => {\n\tif (e === undefined) return null\n\telse {\n\t\treturn (\n\t\t\t<div className=\"Error\">\n\t\t\t\t{e}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst Filter = ({persons}) => {\n\tconst [ searchedPersons, setSearchedPersons] = useState([])\n\n\tconst handleSearchName = (event) => {\n\t\tconst target = event.target.value.toLowerCase()\n\t\tif(target === '') {\n\t\t\tsetSearchedPersons([])\n\t\t} else\n\t\tsetSearchedPersons(persons.filter( (person) => {\n\t\t\tconst str = person.name.toLowerCase()\n\t\t\treturn str.includes(target)\n\t\t}))\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\tfilter shown with <input onChange={handleSearchName}/>\n\t\t\t{searchedPersons.map( (person) => \n\t\t\t\t<p key={person.id}>{person.name} {person.number}</p>\n\t\t\t)}\n\t\t</div>\n\t)\n\n}\n\nconst PersonForm = ({persons, onPersonsChange, onMsgChange, onErrorChange}) => {\n\tconst [ newName, setNewName ] = useState('') \n\tconst [ newNumber, setNewNumber ] = useState('')\n\tconst handleNameChange = (event) => {\n\t\tsetNewName(event.target.value)\n\t}\n\tconst handleNumberChange = (event) => {\n\t\tsetNewNumber(event.target.value)\n\t}\n\tconst addPerson = (event) => {\n\t\tevent.preventDefault()\n\t\tconst newPerson = {\n\t\t\tname: newName,\n\t\t\tnumber: newNumber\n\t\t}\n\t\tconst conflictedPerson = persons.find( person => person.name === newName)\n\t\tif (conflictedPerson) {\n\t\t\tif (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n\t\t\t\tpersonsService.update(conflictedPerson.id, newPerson)\n\t\t\t\t.then( (data) => {\n\t\t\t\t\tonPersonsChange(persons.map( person => person.id === data.id? data : person))\n\t\t\t\t\tonMsgChange(`${data.name}'s number is uplated`)\n\t\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\t\tonMsgChange(undefined)\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t\t\t.catch( (e) => {\n\t\t\t\t\tonErrorChange(personsService.errorHandler(e))\n\t\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\t\tonErrorChange(undefined)\n\t\t\t\t\t}, 5000)\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\tpersonsService.create(newPerson)\n\t\t\t.then( (data) => {\n\t\t\t\tonPersonsChange(persons.concat(data))\n\t\t\t\tonMsgChange(`${data.name} is created`)\n\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\tonMsgChange(undefined)\n\t\t\t\t}, 5000)\n\t\t\t})\n\t\t\t.catch( (e)=> {\n\t\t\t\tonErrorChange(personsService.errorHandler(e))\n\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\tonErrorChange(undefined)\n\t\t\t\t}, 5000)\n\t\t\t})\n\t\t}\n\t}\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={addPerson}>\n\t\t\t\t<div>\n\t\t\t\t\tname: <input value={newName} onChange={handleNameChange}/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\tnumber: <input value={newNumber} onChange={handleNumberChange}/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button type=\"submit\">add</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t)\n}\n\nconst Person = ({person, onPersonDelete, onMsgChange, onErrorChange}) => {\n\n\tconst handleDelete = (event) => {\n\t\tconst id = event.target.value\n\t\tconst name = event.target.name\n\t\tif (window.confirm(`Do you really want to delete ${name}`)) {\n\t\t\tpersonsService.deletePerson(id)\n\t\t\t.then( () => {\n\t\t\t\tonPersonDelete(id)\n\t\t\t\tonMsgChange(`${name} has been deleted`)\n\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\tonMsgChange(undefined)\n\t\t\t\t}, 5000)\n\t\t\t}).catch( (e) => {\n\t\t\t\tonErrorChange(personsService.errorHandler(e))\n\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\tonErrorChange(undefined)\n\t\t\t\t}, 5000)\n\t\t\t})\n\t\t}\n\t}\n\treturn (\n\t\t<p>{person.name} {person.number} <button name={person.name} value={person.id} onClick={handleDelete}>delete</button></p>\n\t)\n}\n\nconst Persons = ({persons, onPersonDelete, onMsgChange, onErrorChange}) => {\n\treturn (\n\t\t<div>\n\t\t\t{persons.map( (person) => \n\t\t\t\t<Person key={person.name} person={person} onPersonDelete={onPersonDelete} onMsgChange={onMsgChange} onErrorChange={onErrorChange} />\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nconst App = () => {\n\tconst [ msg, setMsg ] = useState() \n\tconst [ persons, setPersons ] = useState()\n\tconst [ error, setError ] = useState()\n\tconst handlePersonsChange = (persons) => {\n\t\tsetPersons(persons)\n\t}\n\tconst handleMsgChange = (msg) => {\n\t\tsetMsg(msg)\n\t}\n\tconst handleErrorChange = (e) => {\n\t\tsetError(e)\n\t}\n\tconst handlePersonDelete = (id) => {\n\t\tsetPersons(persons.filter( (person) => id !== person.id))\n\t}\n\tuseEffect( ()=>{\n\t\tpersonsService.getAll()\n\t\t.then( data => setPersons(data))\n\t\t.catch( (e)=>{ window.alert(`error with getAll data: ${e}`)})\n\t}, [])\n\tif (persons === undefined) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h2>Phonebook</h2>\n\t\t\t\t<p>loading</p>\n\t\t\t</div>\n\t\t)\n\t}\n\treturn (\n\t\t<div>\n\t\t\t<h2>Phonebook</h2>\n\t\t\t<Notification msg={msg} />\n\t\t\t<Error e={error} />\n\t\t\t<Filter persons={persons} />\n\t\t\t<h2>add a new</h2>\n\t\t\t<PersonForm persons={persons} onPersonsChange={handlePersonsChange} onMsgChange={handleMsgChange} onErrorChange={handleErrorChange}/>\n\t\t\t<h2>Numbers</h2>\n\t\t\t<Persons persons={persons} onPersonDelete={handlePersonDelete} onMsgChange={handleMsgChange} onErrorChange={handleErrorChange}/>\n\t\t</div>\n\t)\n}\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)"],"sourceRoot":""}