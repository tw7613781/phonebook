(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t(0),o=t.n(r),c=t(13),u=t.n(c),i=t(3),l=t.n(i),s="/api/persons",m=function(){return l.a.get(s).then((function(e){return e.data}))},f=function(e){return l.a.post(s,e).then((function(e){return e.data}))},d=function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},p=(t(36),function(e){var n=e.msg;return void 0===n?null:o.a.createElement("div",{className:"Notification"},n)}),E=function(e){var n=e.e;return void 0===n?null:o.a.createElement("div",{className:"Error"},n)},v=function(e){var n=e.persons,t=Object(r.useState)([]),c=Object(a.a)(t,2),u=c[0],i=c[1];return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{onChange:function(e){var t=e.target.value.toLowerCase();i(""===t?[]:n.filter((function(e){return e.name.toLowerCase().includes(t)})))}}),u.map((function(e){return o.a.createElement("p",{key:e.id},e.name," ",e.number)})))},g=function(e){var n=e.persons,t=e.onPersonsChange,c=e.onMsgChange,u=e.onErrorChange,i=Object(r.useState)(""),l=Object(a.a)(i,2),s=l[0],m=l[1],h=Object(r.useState)(""),p=Object(a.a)(h,2),E=p[0],v=p[1];return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:s,number:E},r=n.find((function(e){return e.name===s}));r?window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&d(r.id,a).then((function(e){t(n.map((function(n){return n.id===e.id?e:n}))),c("".concat(e.name,"'s number is uplated")),setTimeout((function(){c(void 0)}),5e3)})).catch((function(e){u("error with update person: ".concat(JSON.stringify(e.response.data))),setTimeout((function(){u(void 0)}),5e3)})):f(a).then((function(e){t(n.concat(e)),c("".concat(e.name," is created")),setTimeout((function(){c(void 0)}),5e3)})).catch((function(e){u("error with create new person: ".concat(JSON.stringify(e.response.data))),setTimeout((function(){u(void 0)}),5e3)}))}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:s,onChange:function(e){m(e.target.value)}})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:E,onChange:function(e){v(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))))},b=function(e){var n=e.person,t=e.onPersonDelete,a=e.onMsgChange,r=e.onErrorChange;return o.a.createElement("p",null,n.name," ",n.number," ",o.a.createElement("button",{name:n.name,value:n.id,onClick:function(e){var n=e.target.value,o=e.target.name;window.confirm("Do you really want to delete ".concat(o))&&h(n).then((function(){t(n),a("".concat(o," has been deleted")),setTimeout((function(){a(void 0)}),5e3)})).catch((function(e){r("error withn delete ".concat(o,": ").concat(e)),setTimeout((function(){r(void 0)}),5e3)}))}},"delete"))},w=function(e){var n=e.persons,t=e.onPersonDelete,a=e.onMsgChange,r=e.onErrorChange;return o.a.createElement("div",null,n.map((function(e){return o.a.createElement(b,{key:e.name,person:e,onPersonDelete:t,onMsgChange:a,onErrorChange:r})})))},C=function(){var e=Object(r.useState)(),n=Object(a.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)(),i=Object(a.a)(u,2),l=i[0],s=i[1],f=Object(r.useState)(),d=Object(a.a)(f,2),h=d[0],b=d[1],C=function(e){c(e)},O=function(e){b(e)};return Object(r.useEffect)((function(){m().then((function(e){return s(e)})).catch((function(e){window.alert("error with getAll data: ".concat(e))}))}),[]),void 0===l?o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement("p",null,"loading")):o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(p,{msg:t}),o.a.createElement(E,{e:h}),o.a.createElement(v,{persons:l}),o.a.createElement("h2",null,"add a new"),o.a.createElement(g,{persons:l,onPersonsChange:function(e){s(e)},onMsgChange:C,onErrorChange:O}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(w,{persons:l,onPersonDelete:function(e){s(l.filter((function(n){return e!==n.id})))},onMsgChange:C,onErrorChange:O}))};u.a.render(o.a.createElement(C,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b1ed0198.chunk.js.map